===========
Sentry Role
===========

Tasks
=====

* Installs and configures sentry server.
  Note that you should manually create superuser:

  .. code:: bash

      $ /srv/www/sentry.example.com/env/bin/sentry --config=/srv/www/sentry.example.com/settings/sentry.conf.py createuser


Variables
=========

+-------------------------------+-------------------+-------------------------------------+-------------------------------------------+
| Variable                      | Required          | Default                             | Description                               |
+===============================+===================+=====================================+===========================================+
| ``sentry_server_name``        | yes               |                                     | Server domain name.                       |
+-------------------------------+-------------------+-------------------------------------+-------------------------------------------+
| ``sentry_secret_key``         | yes               |                                     | Django secret key.                        |
+-------------------------------+-------------------+-------------------------------------+-------------------------------------------+
| ``sentry_admin_email``        | no                | ``''``                              | Email address of sentry admin.            |
+-------------------------------+-------------------+-------------------------------------+-------------------------------------------+
| ``sentry_server_email``       | no                | ``sentry@{{ sentry_server_name }}`` | Outbound email address.                   |
+-------------------------------+-------------------+-------------------------------------+-------------------------------------------+
| ``sentry_ssl``                | no                | ``no``                              | Use HTTPS.                                |
+-------------------------------+-------------------+-------------------------------------+-------------------------------------------+
| ``sentry_ssl_cert``           | if ``sentry_ssl`` |                                     | Absolute path to chained SSL certificate. |
|                               | is ``yes``        |                                     |                                           |
+-------------------------------+-------------------+-------------------------------------+-------------------------------------------+
| ``sentry_ssl_key``            | if ``sentry_ssl`` |                                     | Absolute path to SSL private key.         |
|                               | is ``yes``        |                                     |                                           |
+-------------------------------+-------------------+-------------------------------------+-------------------------------------------+
| ``sentry_db_host``            | no                | ``127.0.0.1``                       | Postgresql host.                          |
+-------------------------------+-------------------+-------------------------------------+-------------------------------------------+
| ``sentry_db_name``            | no                | ``sentry``                          | Postgresql database name.                 |
+-------------------------------+-------------------+-------------------------------------+-------------------------------------------+
| ``sentry_db_password``        | no                | ``sentry``                          | Postgresql database password.             |
+-------------------------------+-------------------+-------------------------------------+-------------------------------------------+
| ``sentry_redis_host``         | no                | ``127.0.0.1``                       | Redis host.                               |
+-------------------------------+-------------------+-------------------------------------+-------------------------------------------+
| ``sentry_redis_db``           | no                | ``0``                               | Redis database.                           |
+-------------------------------+-------------------+-------------------------------------+-------------------------------------------+
| ``sentry_web_processes``      | no                | ``1``                               | Number of uWSGI worker processes.         |
+-------------------------------+-------------------+-------------------------------------+-------------------------------------------+
| ``sentry_web_threads``        | no                | number of VCPUs                     | Number of uWSGI worker threads.           |
+-------------------------------+-------------------+-------------------------------------+-------------------------------------------+
| ``sentry_worker_processes``   | no                | ``1``                               | Number of celery worker processes.        |
+-------------------------------+-------------------+-------------------------------------+-------------------------------------------+
| ``sentry_worker_concurrency`` | no                | number of VCPUs                     | Celery worker concurrency.                |
+-------------------------------+-------------------+-------------------------------------+-------------------------------------------+
